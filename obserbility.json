{
  "request_id": {
    "enabled": true,
    "header": "X-Request-Id",
    "behavior": {
      "ingress": "if present, accept; else generate",
      "propagation": "gateway -> services always"
    }
  },
  "distributed_tracing": {
    "enabled": true,
    "phase": "plan_now_optional_implement",
    "standard": "W3C Trace Context",
    "headers": [
      "traceparent",
      "tracestate"
    ],
    "behavior": {
      "ingress": "propagate if present; else generate traceparent at gateway",
      "propagation": "gateway -> services",
      "logging": "extract trace_id/span_id into structured logs"
    }
  },
  "structured_logging": {
    "enabled": true,
    "minimum_fields": [
      "timestamp",
      "service",
      "environment",
      "request_id",
      "trace_id",
      "actor_sub",
      "tenant_id",
      "rpc_method",
      "http_method",
      "path",
      "status",
      "latency_ms",
      "error_code"
    ],
    "sink": {
      "decided": false,
      "candidates": [
        "Cloudflare Logpush (recommended for production)",
        "Workers Analytics Engine (metrics-like)",
        "Third-party (Datadog/Splunk/etc)"
      ]
    }
  },
  "metrics": {
    "enabled": true,
    "minimum_metrics": [
      "requests_total",
      "requests_latency_ms_p50_p95_p99",
      "errors_total_by_code",
      "rate_limited_total"
    ],
    "service_specific_metrics": [
      "upstream_latency_ms",
      "upstream_errors_total",
      "cache_hit_ratio"
    ]
  }
}