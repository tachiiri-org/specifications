{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "event_type": "billing.invoice.created",
  "version": 1,
  "compatibility": {
    "change_type": "compatible",
    "reason": "initial schema",
    "effective_from": "2026-02-04"
  },
  "required_context": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "tenant_id",
      "correlation_id",
      "event_id",
      "emitted_at"
    ],
    "properties": {
      "tenant_id": {
        "type": "string",
        "minLength": 1
      },
      "correlation_id": {
        "type": "string",
        "minLength": 1
      },
      "event_id": {
        "type": "string",
        "minLength": 1
      },
      "actor_id": {
        "type": "string",
        "minLength": 1
      },
      "emitted_at": {
        "type": "string",
        "format": "date-time"
      }
    }
  },
  "payload": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "invoice_id",
      "status",
      "currency",
      "amount_minor"
    ],
    "properties": {
      "invoice_id": {
        "type": "string",
        "minLength": 1
      },
      "status": {
        "type": "string",
        "minLength": 1
      },
      "currency": {
        "type": "string",
        "pattern": "^[A-Z]{3}$"
      },
      "amount_minor": {
        "type": "integer",
        "minimum": 0
      }
    }
  }
}