{
  "error_shape_ref": "response/error.json",
  "implemented_errors": {
    "misconfigured": {
      "status": 500,
      "when": "required configuration or secrets are missing/invalid for this service"
    },
    "unauthorized": {
      "status": 401,
      "when": "session cookie is missing/expired/invalid, or session verification failed"
    },
    "forbidden": {
      "status": 403,
      "when": "authenticated but not authorized (e.g., insufficient scope/role, tenant mismatch)"
    },
    "csrf_failed": {
      "status": 403,
      "when": "state-changing request failed CSRF checks (e.g., Origin not allowed or missing Origin)"
    },
    "not_found": {
      "status": 404,
      "when": "no route matched"
    },
    "internal_error": {
      "status": 500,
      "when": "unexpected error not mapped to a known error type"
    }
  },
  "reserved_protocol_errors": {
    "unsupported_media_type": {
      "status": 415,
      "when": "content-type not allowed for endpoints that require JSON"
    },
    "invalid_json": {
      "status": 400,
      "when": "request body cannot be parsed as JSON when JSON is required"
    },
    "payload_too_large": {
      "status": 413,
      "when": "request body exceeds max_body_size_bytes"
    },
    "method_not_allowed": {
      "status": 405,
      "when": "method not allowed by this API"
    }
  }
}