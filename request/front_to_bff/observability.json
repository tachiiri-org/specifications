{
  "scope": "Observability for internet-facing requests (browser to BFF).",
  "version": 1,
  "request_id": {
    "header": "x-request-id",
    "generated_by": "bff",
    "overwrite_if_present": true,
    "propagation": "downstream",
    "echo_to_response": true,
    "notes": [
      "Matches request/front_to_bff/headers.json: generate_on_bff.x-request-id.required=true and overwrite_if_present=true."
    ]
  },
  "tracing": {
    "traceparent": {
      "supported": true,
      "propagation": "passthrough",
      "generate_if_missing": false,
      "header": "traceparent",
      "notes": [
        "Matches request/front_to_bff/headers.json passthrough_to_downstream.allowlist includes traceparent.",
        "Matches request/front_to_bff/http.json observability.trace_header is traceparent."
      ]
    }
  },
  "logging": {
    "required_fields": [
      "request_id",
      "route",
      "method",
      "status",
      "latency_ms"
    ],
    "optional_fields": [
      "traceparent",
      "user_agent",
      "origin"
    ],
    "notes": [
      "Internet-facing: treat inbound identity as untrusted; do not log sensitive cookies.",
      "x-request-id is returned to clients via response header per request/front_to_bff/headers.json response_headers.set."
    ]
  }
}